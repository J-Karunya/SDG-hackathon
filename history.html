<h2>Download Past Reports</h2>
<table id="report-table">
    <thead>
        <tr>
            <th>Report Name</th>
            <th>Generated At</th>
            <th>Download</th>
        </tr>
    </thead>
    <tbody>
        <!-- Data will be loaded here dynamically -->
    </tbody>
</table>

<script>
    // Fetch Report History
    fetch('/report_history')
        .then(response => response.json())
        .then(data => {
            let tableBody = document.querySelector("#report-table tbody");
            tableBody.innerHTML = ""; // Clear existing data
            data.forEach(report => {
                let row = `<tr>
                    <td>${report.filename}</td>
                    <td>${report.generated_at}</td>
                    <td><a href="/download_report/${report.filename}" download>Download</a></td>
                </tr>`;
                tableBody.innerHTML += row;
            });
        })
        .catch(error => console.error("Error fetching reports:", error));
</script>
